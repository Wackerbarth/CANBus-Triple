#!/usr/bin/env bash

echo "// This file is automatically generated by a git hook" >_Version.h
echo "// Do not manually edit it" >>_Version.h
echo "// It does not get committed to the repository"
echo "" >>_Version.h
echo "#define BUILD_VERSION \""`git describe --tags --long`"\"" >>_Version.h

awk '/\[remote \"github\"\]/ { getline; print "#define FIRMWARE_URL  \"" $3 "\""; }' <$GIT_DIR/config | sed "sx\.gitx/x" >>_Version.h
